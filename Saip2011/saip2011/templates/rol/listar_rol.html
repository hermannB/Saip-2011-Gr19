<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
	<script src="js/vanadium-min.js" type="text/javascript"></script>

  <title>Sistema de Administracion de Item</title>
</head>

<body>
  <div id="mainmenu">
    <xi:include href="buscar.html" />
  </div>
  
    <div py:for="perm in request.identity['user'].privilegios">
	    	<div py:choose="">
	     		<span py:when="perm.var == 'control_total' or perm.var == 'alta_rol'">
    				<p><a href="${tg.url('/agregar_rol')}">Agregar Rol</a></p>
    			</span>
    		</div>
    </div>  
  <div py:choose="len(roles)" py:strip="True" id="rol">
    <table class="roles" py:when="0">
      <tr><th>No hay roles registrados..</th></tr>
    </table>
    <table border="1" cellspacing="1" cellpadding="5" class="roles" py:otherwise="">    
      <h2>Lista de Roles</h2>
      <tr align="center">
        <th>Accion</th>
        <th>Nombre</th>
        <th>Descripcion</th>
        <th>Lista_de_Privilegios</th>
      </tr>
      <tr align="center" py:for="rol in roles">
	   <td>
	   <div py:for="perm in request.identity['user'].privilegios">
	    <div py:choose="">
	     <span py:when="perm.var == 'mod_rol'">
	    	<a href="${tg.url('editar_rol?idrol=%d' % rol.idrol)}"><img src="/images/lapiz.png" border="0" height="15"/></a>
	     </span>
	     <span py:when="perm.var == 'eliminar_rol'">
	    	<a href="${tg.url('eliminar_rol?idrol=%d' % rol.idrol)}"><img src="/images/cross.png" border="0"/></a>
	     </span>
	     <span py:when="perm.var == 'control_total'">
	     	<a href="${tg.url('editar_rol?idrol=%d' % rol.idrol)}"><img src="/images/lapiz.png" border="0" height="15"/></a>
	     	<a href="${tg.url('eliminar_rol?idrol=%d' % rol.idrol)}"><img src="/images/cross.png" border="0"/></a>
	     </span>
	    </div>
	   </div>
	   </td>
        <td>${rol.nombrerol}</td>
        <td>${rol.descripcion}</td>
        <td><a href="${tg.url('ver_privilegios?idrol=%d' % rol.idrol)}">ver privilegios</a></td>
      </tr>  
      <tr py:if="total/paginado > 0">
        <td><b>Pagina</b></td><td align="center"><b>${pagina_actual}/${total/paginado}</b></td>
      	<td align="center">
      		<span py:if="inicio > 0">
      			<a href="rol?start=${0}%26end=${paginado}">Inicio</a> | 
      			<a href="rol?start=${inicio-paginado}%26end=${fin-paginado}">Atras</a> 
      		</span>
      		<span py:if="total+1 > fin">
      			| <a href="rol?start=${inicio + paginado}%26end=${fin + paginado}" >Siguiente</a> |
      			<a href="rol?start=${total - paginado}%26end=${total}" py:if="total-paginado > paginado">Fin</a>
      		</span>
      	</td>
      	
      </tr>    
    </table>   
    
  </div>
  <div class="clearingdiv" />
  <div class="notice"> Lista de los roles registrados en el sistema.
    
  </div>
</body>
</html>
